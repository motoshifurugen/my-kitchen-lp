---
import { storeBadges } from "../constants/content";

const { layout = "row", className = "", disabled = false, disabledHint = storeBadges.comingSoonHint } =
  Astro.props;

const badges = [
  {
    key: "ios",
    url: storeBadges.iosUrl,
    label: storeBadges.ios.label,
    src: storeBadges.ios.src,
    alt: storeBadges.ios.alt
  },
  {
    key: "android",
    url: storeBadges.androidUrl,
    label: storeBadges.android.label,
    src: storeBadges.android.src,
    alt: storeBadges.android.alt
  }
];

const containerClass =
  layout === "column"
    ? "flex flex-col gap-sm"
    : "flex flex-wrap gap-md justify-center sm:justify-start";
---

<div class={`${containerClass} ${className}`.trim()}>
  {badges.map((badge) => {
    const isActive = !disabled && Boolean(badge.url?.trim());
    const BadgeTag = isActive ? "a" : "div";

    return (
      <BadgeTag
        href={isActive ? badge.url : undefined}
        aria-label={badge.label}
        aria-disabled={isActive ? undefined : "true"}
        class={`relative inline-flex items-center justify-center py-1 ${
          isActive ? "" : "cursor-not-allowed pointer-events-none"
        }`}
      >
        <img
          class={`h-10 ${isActive ? "" : "opacity-50 grayscale"}`}
          src={badge.src}
          alt={badge.alt}
          loading="lazy"
        />
        {!isActive && disabledHint ? <span class="sr-only">{disabledHint}</span> : null}
      </BadgeTag>
    );
  })}
</div>
